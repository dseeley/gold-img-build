{
  "builders": [
    {
      "type": "vmware-iso",
      "boot_key_interval": "10ms",
      "floppy_files": ["{{kickstartfile_fname}}"],
      "boot_command": [
        "<enter><f6><esc><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs><bs> ",
        "/install/vmlinuz ",
        "auto ",
        "console-setup/ask_detect=false ",
        "console-setup/layoutcode=gb ",
        "console-setup/modelcode=pc105 ",
        "debconf/frontend=noninteractive ",
        "debian-installer=en_GB ",
        "fb=false ",
        "initrd=/install/initrd.gz ",
        "locale=en_GB.UTF-8 ",
        "netcfg/get_domain=thecroft.local ",
        "netcfg/get_hostname=ubuntu1804-template ",
        "grub-installer/bootdev=/dev/sda ",
        "ks=floppy:/{{kickstartfile_fname}} ---<enter>"
      ],
      "boot_wait": "10s",
      "skip_compaction": true,
      "disk_size": {{packer_info.disk_size}},
      "disk_type_id": "thin",
      "guest_os_type": "ubuntu-64",
      "iso_checksum": "{{ubuntu_iso.checksum}}",
      "iso_checksum_type": "sha256",
      "iso_url": "{{ubuntu_iso.url | basename}}",
      "ssh_username": "shutdown",
      "ssh_private_key_file": "./id_rsa_shutdown_nopw",
      "ssh_port": 22,
      "ssh_wait_timeout": "10000s",
      "shutdown_command": "sudo shutdown -h now",
      "headless": true,
      "vm_name": "ubuntu1804-packer-template",
      "vmx_data": {
        "memsize": "{{packer_info.vmx_data.memsize}}",
        "numvcpus": "{{packer_info.vmx_data.numvcpus}}",
        "vhv.enable": "TRUE",
        "ethernet0.virtualDev": "vmxnet3",
        "ethernet0.networkName": "{{packer_info.vmx_data.ethernet0_networkName}}",
        "ethernet0.uptCompatibility": true,
        "ethernet0.present": "TRUE"
      },
      "skip_export": true,
      "keep_registered": true,
      "vnc_disable_password": true,
      "version": 14,
      "remote_type": "esx5",
      "remote_host": "192.168.1.3",
      "remote_username": "svc",
      "remote_private_key_file": "./id_rsa_esxisvc_nopw",
      "remote_datastore" : "sata-raid10-4tb-01",
      "format": "vmx"
    }
  ]
}
